name: squid
squid:
  image: "gar-registry.caas.intel.com/star-fw/tinkerbell/squid-web-proxy:latest"
  replicaCount: 1
  resources:
    limits:
      cpu: "0.5"
      memory: "512Mi"
    requests:
      cpu: "0.2"
      memory: "256Mi"
  squidConfig: "acl globalnet src all\nacl localnet src 10.0.0.0/8     # RFC1918 possible internal network\nacl localnet src 172.16.0.0/12  # RFC1918 possible internal network\nacl localnet src 192.168.0.0/16 # RFC1918 possible internal network\nacl localnet src fc00::/7       # RFC 4193 local private network range\nacl localnet src fe80::/10      # RFC 4291 link-local (directly plugged) machines\nacl SSL_ports port 443\nacl Safe_ports port 80          # http\nacl Safe_ports port 21          # ftp\nacl Safe_ports port 443         # https\nacl Safe_ports port 70          # gopher\nacl Safe_ports port 210         # wais\nacl Safe_ports port 1025-65535  # unregistered ports\nacl Safe_ports port 280         # http-mgmt\nacl Safe_ports port 488         # gss-http\nacl Safe_ports port 591         # filemaker\nacl Safe_ports port 777         # multiling http\nacl CONNECT method CONNECT\nhttp_access deny !Safe_ports\nhttp_access deny CONNECT !SSL_ports\nhttp_access allow localhost manager\nhttp_access deny manager\nhttp_access deny to_localhost\nhttp_access allow globalnet\nhttp_access allow localnet\nhttp_access allow localhost\nhttp_access deny all\nhttp_port 3128\n  #magic___^_^___line\nhttp_port 4128 ssl-bump generate-host-certificates=on dynamic_cert_mem_cache_size=4MB cert=/etc/squid-cert/private.pem key=/etc/squid-cert/private.pem \nssl_bump server-first all\n  #magic___^_^___line\ncache_peer proxy-dmz.intel.com parent 911 0 no-query no-digest\nnever_direct allow all\n# always_direct allow all\n  #magic___^_^___line\nsslcrtd_program /usr/lib/squid/security_file_certgen -s /var/lib/ssl_db -M 4MB\n# sslcrtd_children 4 startup=1 idle=1\n  #magic___^_^___line\n  #magic___^_^___line\nrefresh_pattern -i .rpm$ 10080 100% 10080 refresh-ims override-expire\nrefresh_pattern -i .iso$ 10080 100% 10080 refresh-ims override-expire\nrefresh_pattern -i .deb$ 10080 100% 10080 refresh-ims override-expire\nrefresh_pattern -i .apk$ 10080 100% 10080 refresh-ims override-expire\nrefresh_pattern -i .tar$ 10080 100% 10080 refresh-ims override-expire\nrefresh_pattern -i .zip$ 10080 100% 10080 refresh-ims override-expire\nrefresh_pattern -i .tgz$ 10080 100% 10080 refresh-ims override-expire\nrefresh_pattern -i .gz$ 10080 100% 10080 refresh-ims override-expire\n# refresh_pattern (Release|Packages(.gz)*)$      0       20%     2880\nrefresh_pattern ^ftp:           1440    20%     10080\nrefresh_pattern ^gopher:        1440    0%      1440\nrefresh_pattern -i (/cgi-bin/|\\?) 0     0%      0\nrefresh_pattern .               0       20%     4320\nmaximum_object_size 6 GB\ncache_dir ufs /var/spool/squid 10240 16 256\ncache_mem 256 MB\nmaximum_object_size_in_memory 512 KB\ncache_replacement_policy heap LFUDA\nrange_offset_limit -1\nquick_abort_min -1 KB\ncoredump_dir /var/spool/squid\n#access_log none\n#cache_log none\n"
